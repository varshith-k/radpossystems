if(jQuery(function(e){function t(){return[-(o("padding-top")+o("margin-top")+o("border-top-width")),-(o("padding-right")+o("margin-right")+o("border-right-width")),0,-(o("padding-left")+o("margin-left")+o("border-left-width"))].join("px ")+"px"}function o(t){return body=parseInt(e("body").css(t)||0),html=parseInt(e("html").css(t)||0),body+html}e(document).on("ebox:OnAfterInit",function(){$mats=e(".rstboxes .welcomemat"),$mats.length&&($mats.each(function(t,o){$mat=e(o),$mat.css({height:$mat.css("height")}),$mat.bind("beforeOpen",function(){window.scrollTo(0,0)}),$mat.bind("afterOpen",function(){e("html").addClass("eboxWelcomeMat")}).bind("afterClose",function(){e("html").removeClass("eboxWelcomeMat")})}),e("<div>").addClass("rstboxes eboxWelcomeMats").prependTo("body").css({margin:t()}),$mats.appendTo(e("body .eboxWelcomeMats")))})}),void 0===rstbox)var rstbox={};void 0===rstbox.jQuery&&(rstbox.jQuery=jQuery.noConflict()),function(e){e(document).ready(function(){function t(e){e&&u&&(console=window.console||{log:function(){}},console.log(l+" "+e))}function o(e,t,o){if(t&&(obj=e.data("settings"),obj)){for(var n=t.split(".");n.length&&(obj=obj[n.shift()]););return"undefined"==typeof obj&&void 0!==o?o:obj}}function n(e){if(e){if(location.hash.replace("#","")==e.replace("#",""))return t("hashtags match"),!0;t("hashtags does not match")}}function i(e,t,o){r="";if("session"!=t){var n,i=new Date,s=i.getTime();switch(t){case"days":n=24*o*60*60;break;case"hours":n=60*o*60;break;case"minutes":n=60*o;break;case"seconds":n=o;break;case"ever":n=31536e4;break;case"remove":n=-1}i.setTime(s+1e3*n);var r="; expires="+i.toGMTString()}document.cookie=d+e+"=true"+r+"; path=/"}function s(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function r(e){for(var t=d+e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function a(e,n){var i=(i=e.attr("id")).replace("rstbox_","");if(void 0!==e){if(e.is(":animated")||e.hasClass("velocity-animating"))return!1;if(n&&e.is(":visible"))t("Box "+i+" is already opened");else{if(n||!e.is(":hidden")){t("Box "+i+" is going to "+(n?"open":"close")+"!");var s=o(e,"transitionin","fadeIn"),r=o(e,"transitionout","fadeOut"),a=n?s:r,l=n?o(e,"delay",0):0,c=o(e,"duration","400");return e.velocity(a,{delay:l,duration:c,begin:function(t){e.trigger(n?"beforeOpen":"beforeClose"),n&&a.indexOf("callout.")>-1&&e.css({display:"block",opacity:"1"})},complete:function(t){e.trigger(n?"afterOpen":"afterClose")}}),n}t("Box "+i+" is already closed")}}else t("Box "+i+" is not present in the current page.")}var l="[RSTBox]",c=e(".rstboxes").last();if(c.children().length){var d="rstbox_"+c.data("site")+"_",u=(e(window).height(),e(document).height(),c.data("debug"));e("*[data-ebox], *[data-ebox-cmd]").on("click",function(t){if(boxID=parseInt(e(this).data("ebox")),box=boxID?e(".rstboxes > #rstbox_"+boxID).first():e(this).closest("div.rstbox"),box){switch(e(this).data("ebox-cmd")){case"open":box.trigger("open");break;case"close":box.trigger("close");break;case"closeKeep":box.trigger("closeKeep");break;default:box.is(":visible")?box.trigger("close"):box.trigger("open")}"0"!=e(this).data("ebox-prevent")&&t.preventDefault()}}),e("*[data-rstbox], *[data-rstbox-command], *[data-rstbox-cmd]").on("click",function(t){if(boxID=parseInt(e(this).data("rstbox")),boxID?box=e(".rstboxes > #rstbox_"+boxID).first():box=e(this).closest("div.rstbox"),box){var o=e(this).data("rstbox-cmd");switch(boxCommand=void 0!==o&&!1!==o?o:e(this).data("rstbox-command"),boxCommand){case"open":box.trigger("open");break;case"close":box.trigger("close");break;case"closeKeep":box.trigger("closeKeep");break;default:box.is(":visible")?box.trigger("close"):box.trigger("open")}"0"!=e(this).data("rstbox-prevent")&&t.preventDefault()}}),c.find("> .rstbox").each(function(){function l(e){a(e,!1),m||(cookieType=e.data("cookietype"),"session"==cookieType&&(i(f,"session"),t("Box "+f+" Session cookie set")),"ever"==cookieType&&(i(f,"ever"),t("Box "+f+" Cookie set for ever")),"seconds"!=cookieType&&"minutes"!=cookieType&&"days"!=cookieType&&"hours"!=cookieType||(cook=parseInt(e.data("cookie")),cook>0&&(i(f,e.data("cookietype"),cook),t("Box "+f+" Cookie set for "+cook+" "+e.data("cookietype")))))}var d=e(this),f=d.attr("id").replace("rstbox_",""),b=0,g=d.data("trigger").split(":")[0],x="pageload"!=g&&d.data("trigger").split(":")[1],p=r(f),m="1"==o(d,"testmode",0);if(d.bind("open",function(){a(d,!0)}),d.bind("close",function(){a(d,!1)}),d.bind("closeKeep",function(){l(d)}),d.bind("setCookie",function(e,t,o){i(f,t,o)}),d.bind("beforeOpen",function(){ovrl=o(d,"overlay"),ovrl&&(overlay=ovrl.split(":"),overlayObject=e("<div/>",{id:"overlay_"+d.attr("id"),class:"rstbox_overlay",css:{"background-color":overlay[0]}}).insertAfter(d),overlayClick=parseInt(overlay[1]),overlayClick&&overlayObject.on("click",function(){d.trigger("closeKeep")}),d.bind("beforeClose",function(){d.next(".rstbox_overlay").remove()}))}),d.bind("beforeOpen",function(){parseInt(o(d,"preventpagescroll",0))&&e("html").addClass("eboxPageNoScroll")}),d.bind("afterOpen",function(){d.addClass("rstbox_visible"),e("body").addClass(d.attr("id")),t("Box "+f+" opened")}),d.bind("afterClose",function(){d.removeClass("rstbox_visible"),e("body").removeClass(d.attr("id")),e("html").removeClass("eboxPageNoScroll"),t("Box "+f+" closed")}),m&&t("Box "+f+" is on test mode"),!p||m){if("element"==g){if(0==(k=e(x).filter(":first")).length)return void t("Box "+f+" Can't find element \""+x+'". Not showing box.');var h="load resize scroll.box"+parseInt(f),v=0!=parseInt(o(d,"autohide",0));(w=function(){r(f)||(b&&clearTimeout(b),b=window.setTimeout(function(){s(k)?(v||e(window).unbind(h,w),a(d,!0)):a(d,!1)},50))})(),e(window).bind(h,w),d.bind("afterClose",function(){r(f)&&(t("Box "+f+" Unbinding Scroll Check"),e(window).unbind(h,w))})}if("pageheight"==g){var h="load resize scroll.box"+parseInt(f),v=0!=parseInt(o(d,"autohide",0)),y=parseInt(x);t("Box "+f+" is going to be triggered on "+y+"% of page height.");var w=function(){r(f)||(b&&clearTimeout(b),b=window.setTimeout(function(){var o=e(window).scrollTop(),n=e(document).height(),i=e(window).height(),s=o/(n-i)*100;t("Box "+f+" - Scroll Debug: Wintop="+o),t("Box "+f+" - Scroll Debug: Document Height="+n),t("Box "+f+" - Scroll Debug: Window Height="+i),t("Box "+f+" - Scroll Debug: Percentage of scroll="+s+"%"),s>y?(v||e(window).unbind(h,w),d.is(":visible")||a(d,!0)):d.is(":visible")&&v&&a(d,!1)},50))};w(),e(window).bind(h,w),d.bind("afterClose",function(){r(f)&&(t("Box "+f+" Unbinding Scroll Check"),e(window).unbind(h,w))})}if("userleave"==g&&(t("Box "+f+" is going to be triggered on user leave"),e(document).ExitIntent({timer:o(d,"exittimer",1e3),delay:o(d,"exitdelay",0),debug:u,callback:function(){r(f)||a(d,!0)}})),"pageready"==g){if(r(f))return;t("Box "+f+" is going to be triggered at page ready"),a(d,!0)}if("pageload"==g&&e(window).load(function(){r(f)||(t("Box "+f+" is going to be triggered at page load"),a(d,!0))}),"elementHover"==g){var k=e(x),I=o(d,"delay",30);0==k.length?t("Box "+f+" Can't find element \""+x+'". Not showing box.'):(t("Box "+f+" will be trigger at "+x+"hover"),k.on({mouseover:function(){b=setTimeout(function(){r(f)||a(d,!0)},I)},mouseout:function(){clearTimeout(b)}}),d.bind("afterClose",function(){r(f)&&(t("Box "+f+" Unbinding MouseOver & MouseOut events"),k.unbind("mouseover mouseout"))}))}"onclick"==g&&0==!(k=e(o(d,"triggerelement"))).length&&(k.on("click",function(e){r(f)||(a(d,!0),parseInt(o(d,"triggerpreventdefault","1"))>0&&e.preventDefault())}),t("Box "+f+" will be triggered on click")),"ondemand"==g&&t("Box "+f+" will be triggered on demand"),n(o(d,"triggerbyhash"))&&a(d,!0);var C=o(d,"autoclose",0);C>0&&(t("Box "+f+" will be auto-closed after "+C+" miliseconds"),d.bind("afterOpen",function(){setTimeout(function(){d.trigger("closeKeep")},C)})),parseInt(o(d,"closeopened",0))>0&&d.bind("beforeOpen",function(){c.find(".rstbox").trigger("close")})}else t("Box "+f+" is hidden by cookie")}),e(document).trigger("ebox:OnAfterInit")}else console.log(l+" Can't find any boxes on this page. Exiting..")})}(rstbox.jQuery),function(e,t,o,n){function i(t,o){this.options=e.extend({},s,o);var n=this;setTimeout(function(){n.init()},n.options.timer)}var s={sensitivity:0,timer:1e3,delay:0,aggressive:!1,callback:null,debug:!1},r=!1,a=null;i.prototype.init=function(){this.options;var t=this;this.log("Init after "+this.options.timer),e(o).on("mouseout.exitintent",function(e){var o=!e.relatedTarget&&!e.toElement&&e.clientY<50;o&&(a=setTimeout(function(){t.fire()},t.options.delay)),t.log("Event: mouseout, Pass: "+o)}),this.options.sensitivity>0&&e(o).on("mousemove.exitintent",function(e){e.clientY<=t.options.sensitivity&&(t.log("Event: MouseMove"+e.clientY),a=setTimeout(function(){t.fire()},t.options.delay))}),e(o).on("mouseenter.exitintent",function(e){t.log("Event: mouseenter"),t.cleartimer()})},i.prototype.cleartimer=function(){a&&(this.log("Clearing Timer"),clearTimeout(a),a=null)},i.prototype.fire=function(){r||(this.log("Fire!"+a),"function"==typeof this.options.callback&&this.options.callback.call(this),this.options.aggressive||this.stop())},i.prototype.log=function(e){this.options.debug&&console.log("[Exit Intent] "+e)},i.prototype.stop=function(){this.log("Destroy"),e(o).off("mousemove.exitintent"),e(o).off("mouseout.exitintent"),e(o).off("mouseenter.exitintent"),r=!0},e.fn.ExitIntent=function(t){return this.each(function(){e.data(this,"plugin_ExitIntent")||e.data(this,"plugin_ExitIntent",new i(this,t))})}}(jQuery,window,document),function(e){function o(){if(rstboxes=e(".rstboxes").last(),rstboxes.children().length){if(a=rstboxes.data("debug"),track=rstboxes.data("tracking"),track&&(t=track.split(":"),t.length))return l=t[0],c=t[1],d=t[2],"force"==c&&r(function(){return!0}),!0}else n("No boxes found. Tracking disabled.")}function n(e){a&&(e=u+e,console.log(e))}function i(e,t){s(function(o,i){if(value=parseInt(t.attr("id").replace("rstbox_","")),label="Box #"+value+" - "+t.data("title"),msg="GA "+o+":"+(i?"Remote":"Local")+":"+e+":"+value+":"+label,"Classic"==o)return _gaq.push(["_set","hitCallback",function(){n(msg)}]),void _gaq.push(["_trackEvent",d,e,label]);"Universal"!=o||ga("send","event",{eventCategory:d,eventAction:e,eventLabel:label,hitCallback:function(){n(msg)}})})}function s(e){if(void 0===window._gaq){if(!window.ga||!ga.create)return r(function(){e("Universal",1)}),!1;e("Universal",0)}else e("Classic",0)}function r(e){!function(e,t,o,n,i,s,r){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,s=t.createElement(o),r=t.getElementsByTagName(o)[0],s.async=1,s.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(s,r)}(window,document,"script",0,"ga"),ga("create",l,"auto"),ga("require","displayfeatures"),ga(function(){e()})}var a,l,c,d,u="RSTBox Tracking: ";e(document).ready(function(){o()?rstboxes.find("> .rstbox").each(function(){!function(e){e.bind("afterClose",function(){i("Close",e)}),e.bind("afterOpen",function(){i("Open",e)})}(e(this))}):n("Disabled")})}(rstbox.jQuery),function(e){function t(){if((i=e(".rstboxes").last())&&i.children().length)return!0;o(r.NO_BOXES_FOUND)}function o(e){i.data("debug")&&console.log(s+e)}function n(t,n){var s={};s.plugin="rstbox",s.task="track",s.box=n,s.event=t,s[i.data("t")]=1,e.ajax({type:"POST",url:i.data("baseurl")+"index.php?option=com_ajax&format=raw",data:s,async:!0,dataType:"json",success:function(e){var t=e.status,n="Event #"+e.eventid+" - Box #"+e.box;o(t?r.SUCCESS+":"+n:r.FAIL+":"+n)},error:function(){o(r.GENERAL_ERROR)}})}var i,s="eBox Logging: ",r={NO_BOXES_FOUND:"No boxes found. Abort",SUCCESS:"Success",FAIL:"Fail",GENERAL_ERROR:"General Error - Make sure your browser accepts cookies!",DISABLED:"Is disabled",INITIALIZED:"Plugin initialized successfully"};e(document).ready(function(){t()&&(o(r.INITIALIZED),e(".rstbox").each(function(){if(box=e(this),boxID=box.attr("id").replace("rstbox_",""),boxSettings=box.data("settings"),disableLog=0==parseInt(boxSettings.log),testMode=1==parseInt(boxSettings.testmode),testMode||disableLog)return!0;!function(e){box.bind("afterOpen",function(){n(1,e)})}(boxID)}))})}(rstbox.jQuery),function(e){"function"==typeof e.Velocity.RegisterEffect&&(e.Velocity.RegisterEffect("rstbox.slideUpIn",{defaultDuration:450,calls:[[{translateY:"100%",opacity:1},.05],[{translateY:0},.95]]}),e.Velocity.RegisterEffect("rstbox.slideUpOut",{defaultDuration:450,calls:[[{translateY:"100%"},.95],[{opacity:0},.05]]}),e.Velocity.RegisterEffect("rstbox.slideDownIn",{defaultDuration:450,calls:[[{translateY:"-100%",opacity:1},.05],[{translateY:0},.95]]}),e.Velocity.RegisterEffect("rstbox.slideDownOut",{defaultDuration:450,calls:[[{translateY:"-100%"},.95],[{opacity:0},.05]]}),e.Velocity.RegisterEffect("rstbox.slideLeftIn",{defaultDuration:450,calls:[[{translateX:"-100%",opacity:1},.05],[{translateX:0},.95]]}),e.Velocity.RegisterEffect("rstbox.slideLeftOut",{defaultDuration:450,calls:[[{translateX:"-100%"},.95],[{opacity:0},.05]]}),e.Velocity.RegisterEffect("rstbox.slideRightIn",{defaultDuration:450,calls:[[{translateX:"100%",opacity:1},.05],[{translateX:0},.95]]}),e.Velocity.RegisterEffect("rstbox.slideRightOut",{defaultDuration:450,calls:[[{translateX:"100%"},.95],[{opacity:0},.05]]}))}(jQuery);